<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ú–ò–§–ò</title>
    <link rel="icon" href="favicon.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="icon-512.png" type="image/x-icon">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #f5f5f5;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        img {
            margin-top: 20px;
            max-width: 50%;
            height: auto;
        }

        h1 {
            margin: 10px 0 5px;
            font-size: 1.8rem;
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

        h3 {
            margin: 20px 0 10px;
            font-size: 0.9rem;
            font-weight: lighter;
            color: #555;
        }

        .menu-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 5%;
            box-sizing: border-box;
        }

        div.button {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 95%;
            height: 80px;
            background-color: #295BB0;
            margin: 4px 0;
            font-weight: bold;
            font-size: large;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        div.button:hover {
            background-color: #1e4a8a;
        }

        div.predun_button, div.sportzal_button {
            border-top-left-radius: 24px;
            border-top-right-radius: 24px;
        }

        div.vo_button_zaoch, div.info_button {
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
        }

        #backButton {
            background-color: #6c757d;
        }

        #backButton:hover {
            background-color: #5a6268;
        }

        /* –°–∫—Ä—ã—Ç–æ–µ –ø–æ–¥–º–µ–Ω—é */
        #predunmenu {
            display: none;
            width: 100%;
        }

        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Äî –≤–∏–¥–∏–º–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        #mainmenu {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
    </style>
    <script>
        function showpredunmenu() {
            document.getElementById('mainmenu').style.display = 'none';
            document.getElementById('predunmenu').style.display = 'flex';
        }
        function showspomenu() {
            document.getElementById('mainmenu').style.display = 'none';
            document.getElementById('spomenu').style.display = 'flex';
        }
        function showvoochmenu() {
            document.getElementById('mainmenu').style.display = 'none';
            document.getElementById('voochmenu').style.display = 'flex';
        }
        function showvozaochmenu() {
            document.getElementById('mainmenu').style.display = 'none';
            document.getElementById('vozaochmenu').style.display = 'flex';
        }
        function showMainmenu() {
            document.getElementById('predunmenu').style.display = 'none';
            document.getElementById('spomenu').style.display='none';
            document.getElementById('voochmenu').style.display='none';
            document.getElementById('vozaochmenu').style.display='none';
            document.getElementById('mainmenu').style.display = 'flex';
        }

        async function openPDF(pdfUrl, cacheName = 'pdf-cache') {
            try {
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é
                const response = await fetch(pdfUrl, { cache: 'no-cache' });

                if (response.ok) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
                    const cache = await caches.open(cacheName);
                    await cache.put(pdfUrl, response.clone());

                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
                    const blob = await response.blob();
                    const url = URL.createObjectURL(blob);
                    window.open(url, '_blank');
                    return;
                }
            } catch (err) {
                console.warn("–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏–ª–∏ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–±—É–µ–º –∫—ç—à...");
            }

            // –ï—Å–ª–∏ –æ–Ω–ª–∞–π–Ω-–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Äî –ø—Ä–æ–±—É–µ–º –∏–∑ –∫—ç—à–∞
            const cache = await caches.open(cacheName);
            const cachedResponse = await cache.match(pdfUrl);

            if (cachedResponse) {
                const blob = await cachedResponse.blob();
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');
            } else {
                alert("–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ PDF –µ—â—ë –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –æ–Ω–ª–∞–π–Ω.");
            }
        }

        // ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–≤–∫–ª—é—á–∞—è PDF)
        if ('serviceWorker' in navigator) {
            const swContent = `
                const CACHE_NAME = 'pdf-cache-v1';
                const PDF_URLS = [
                    'https://mephi3.ru/files/education/edu_school/rasp.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_o.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_o_new.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_oz.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_oz_new.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_zach.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_ekz.pdf',
                    'https://mephi3.ru/files/education/edu_higher/rasp_presedach.pdf',
                    'https://mephi3.ru/files/education/edu_secondary/rasp.pdf',
                    'https://mephi3.ru/files/education/edu_secondary/rasp_next.pdf',
                    'https://mephi3.ru/files/education/edu_secondary/rasp_ekz.pdf',
                    'https://mephi3.ru/files/education/edu_secondary/rasp_zach.pdf',
                    'https://mephi3.ru/files/education/edu_secondary/rasp_peresdach.pdf',
                    'https://mephi3.ru/files/education/mifitnes.pdf'
                    // üëà –°–Æ–î–ê –î–û–ë–ê–í–¨ –°–í–û–ò –†–ï–ê–õ–¨–ù–´–ï –°–°–´–õ–ö–ò –ù–ê PDF
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME).then(cache => {
                            return cache.addAll(PDF_URLS).catch(err => {
                                console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å PDF –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:', err);
                            });
                        })
                    );
                });

                self.addEventListener('fetch', event => {
                    const url = new URL(event.request.url);
                    if (PDF_URLS.some(pdfUrl => url.href.startsWith(pdfUrl))) {
                        event.respondWith(
                            caches.match(event.request).then(cached => {
                                return cached || fetch(event.request);
                            })
                        );
                    }
                });
            `;

            const swBlob = new Blob([swContent], { type: 'application/javascript' });
            const swURL = URL.createObjectURL(swBlob);

            navigator.serviceWorker.register(swURL).then(reg => {
                console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω (–¥–ª—è PDF)');
            }).catch(err => {
                console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW:', err);
            });
        }
    </script>
</head>
<body>
    <img src="logo.png" alt="–ú–ò–§–ò-3">
    <br>
    <h1>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h1>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mainmenu" class="menu-container">
        <h3>–û—Ç–¥–µ–ª–µ–Ω–∏—è</h3>
        <div class="button predun_button" onclick="showpredunmenu()">–ü—Ä–µ–¥—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–∞—Ä–∏–π</div>
        <div class="button spo_button" onclick="showspomenu()">–°—Ä–µ–¥–Ω–µ–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
        <div class="button vo_button_och" onclick="showvoochmenu()">–í—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
        <div class="button vo_button_zaoch" onclick="showvozaochmenu()">–í—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (–∑–∞–æ—á–Ω–æ–µ)</div>

        <h3>–û–±—â–µ–µ</h3>
        <div class="button sportzal_button" onclick="openPDF('https://mephi3.ru/files/education/mifitnes.pdf?v=1757326628996')">–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã —Å–ø–æ—Ä—Ç–∑–∞–ª–∞</div>
        <div class="button site_button" onclick="window.location.href='https://mephi3.ru'">–°–∞–π—Ç —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞</div>
        <div class="button info_button" onclick="alert('–í–µ—Ä—Å–∏—è 1.0')">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
    </div>

    <!-- –ü–æ–¥–º–µ–Ω—é –¥–ª—è –ü—Ä–µ–¥—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–∞—Ä–∏—è -->
    <div id="predunmenu" class="menu-container" style="display:none;">
        <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–∞—Ä–∏—è</h3>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_school/rasp.pdf')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤</div>
        <div class="button" onclick="window.location.href='https://net.mephi3.ru'">–°–∏—Å—Ç–µ–º–∞ –°–µ—Ç–µ–≤–æ–π –≥–æ—Ä–æ–¥</div>
        <div class="button" id="backButton" onclick="showMainmenu()">–ù–∞–∑–∞–¥</div>
    </div>
    <div id="spomenu" class="menu-container" style="display:none;">
        <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –°–ü–û</h3>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_secondary/rasp.pdf')">–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_secondary/rasp_next.pdf')">–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_secondary/rasp_zach.pdf')">–ó–∞—á—ë—Ç—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_secondary/rasp_ekz.pdf')">–≠–∫–∑–∞–º–µ–Ω—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_secondary/rasp_peresdach.pdf')">–ü–µ—Ä–µ—Å–¥–∞—á–∏</div>
        <div class="button" onclick="window.location.href='https://stud.mephi3.ru'">–ü–ª–∞–Ω–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
        <div class="button" id="backButton" onclick="showMainmenu()">–ù–∞–∑–∞–¥</div>
    </div>
    <div id="voochmenu" class="menu-container" style="display:none;">
        <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –í–û</h3>
<div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_o.pdf')">–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_o_new.pdf')">–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_zach.pdf')">–ó–∞—á—ë—Ç—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_ekz.pdf')">–≠–∫–∑–∞–º–µ–Ω—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_peresdach.pdf')">–ü–µ—Ä–µ—Å–¥–∞—á–∏</div>
        <div class="button" onclick="window.location.href='https://stud.mephi3.ru'">–ü–ª–∞–Ω–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
        <div class="button" id="backButton" onclick="showMainmenu()">–ù–∞–∑–∞–¥</div>
    </div>
    <div id="vozaochmenu" class="menu-container" style="display:none;">
        <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –í–û (–æ—á–Ω–æ-–∑–∞–æ—á–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ)</h3>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_oz.pdf')">–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_oz_new.pdf')">–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_zach.pdf')">–ó–∞—á—ë—Ç—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_ekz.pdf')">–≠–∫–∑–∞–º–µ–Ω—ã</div>
        <div class="button" onclick="openPDF('https://mephi3.ru/files/education/edu_higher/rasp_peresdach.pdf')">–ü–µ—Ä–µ—Å–¥–∞—á–∏</div>
        <div class="button" onclick="window.location.href='https://stud.mephi3.ru'">–ü–ª–∞–Ω–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
        <div class="button" id="backButton" onclick="showMainmenu()">–ù–∞–∑–∞–¥</div>
    </div>


</body>
</html>